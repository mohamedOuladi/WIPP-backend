# User Management in WIPP - RBAC and ACL descriptions

Identity Management in WIPP provided by [Keycloak](https://www.keycloak.org/).

## WIPP roles
Currently, three roles are available:
- *user*: Can create resources, edit its own resources, delete its own unlocked resources, make them public. Can read and use public resources. 
- *admin*: Can do all of the above on all resources, and register new plugins.
- *anonymous*: Can read public resources.  
Roles *user* and *admin* are defined in Keycloak. Role *user* is added by default, *admin* can be added manually to an user from the Keycloak dashboard, see https://www.keycloak.org/docs/latest/server_admin/index.html#user-role-mappings

## Access Control Lists
The following table describes which actions a WIPP user can do depending on their role, the resource owner and resource visibility, using the REST API.  
<i>Note: C=create, R=read, U=update/edit, D=delete</i>

<table>
  <th>
    Resource
  </th>
  <th colspan="5">
    admin
  </th>
  <th colspan="5">
    user
  </th>
  <th colspan="5">
    anonymous
  </th>
  <tr>
    <td><b>Images collections</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>CSV collections</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Stitching vectors</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Pyramids</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>N</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Pyramid annotations</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Pyramid visualizations</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Tensorflow models</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>N</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Notebooks</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Generic data</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>N</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td collspan="16"></td>
  </tr>
  <tr>
    <td><b>Plugins</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Public</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>N</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td collspan="16"></td>
  </tr>
  <tr>
    <td><b>Workflows</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><b>Jobs</b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
    <td><b>C</b></td>
    <td><b>R</b></td>
    <td><b>U</b></td>
    <td><b>D</b></td>
    <td><b></b></td>
  </tr>
  <tr>
    <td><i>Private (is owner)</i></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Private (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>N</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
  <tr>
    <td><i>Public (not owner)</i></td>
    <td>X</td>
    <td>Y</td>
    <td>Y</td>
    <td>Y</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
    <td>X</td>
    <td>Y</td>
    <td>N</td>
    <td>N</td>
    <td></td>
  </tr>
</table>